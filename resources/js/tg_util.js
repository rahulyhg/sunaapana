
Starting_letters = {
    ashwini:{
        padham_0:"Chu, Che, Cho, Choo, La, Laa",
        padham_1:"Chu",
        padham_2:"Che",
        padham_3:"Cho",
        padham_4:"La"
    },
    
     bharani:{
        padham_0:"Li, Lu, Le, Lo, Lee",
        padham_1:"Li",
        padham_2:"Lu",
        padham_3:"Le",
        padham_4:"Lo"
    },
    
     krithika:{
        padham_0:"Aa, Ae, E, Ee, Ai, A, I, Oo, U",
        padham_1:"A",
        padham_2:"I",
        padham_3:"U",
        padham_4:"E"
    },
    
    rohini:{
        padham_0:"O, Va, Vaa, Vi, Vee, Vu, Voo, Wa, Wu",
        padham_1:"O",
        padham_2:"Va, Ba",
        padham_3:"Vi, Bi",
        padham_4:"Vu, Bu"
    },
    
    
     mrigasira:{
        padham_0:"Ve, Vo, Ka, Kaa, Ki Kee, We, Wo",
        padham_1:"Ve, Be",
        padham_2:"Vo, Bo",
        padham_3:"Ka",
        padham_4:"Ke"
    },
    
     thiruvathira:{
        padham_0:"Ku, Kam, Ja, Cha, Gha, Da, Na, Jha",
        padham_1:"Ku",
        padham_2:"Gha",
        padham_3:"Ng, Na",
        padham_4:"Cha"
    },
    
    punarvasu:{
        padham_0:"Ke, Kay Ko, Ha, Hi, Hee",
        padham_1:"Ke",
        padham_2:"Ko",
        padham_3:"Ha",
        padham_4:"Hi"
    },
    
    pushya:{
        padham_0:"Hu, He, Ho, Da",
        padham_1:"Hu",
        padham_2:"He",
        padham_3:"Ho",
        padham_4:"Da"
    },
    
    aslesha:{
        padham_0:"Di, Du, De, Do, Dee, Me, Da",
        padham_1:"Di",
        padham_2:"Du",
        padham_3:"De",
        padham_4:"Do"
    },
    
    magha:{
        padham_0:"Ma, Maa, Mi, Mee Mu, Me",
        padham_1:"Ma",
        padham_2:"Mi",
        padham_3:"Mu",
        padham_4:"Me"
    },
    purva:{
        padham_0:"Mo, Ta, Taa, Ti, Tee, Tu",
        padham_1:"Mo",
        padham_2:"Ta",
        padham_3:"Te",
        padham_4:"Tu"
    },
    
    uttara:{
        padham_0:"Te, Ta, Taa, To, Pa, Paa, Pi, Pee",
        padham_1:"Te",
        padham_2:"To",
        padham_3:"Pa",
        padham_4:"Pi"
    },
    
    hasta:{
        padham_0:"Pu, Sha, Shaa, Na, Poo, Tha",
        padham_1:"Pu",
        padham_2:"Sha",
        padham_3:"Na",
        padham_4:"Tha"
    },
    
    chitra:{
        padham_0:"Pe, Po, Ra, Raa, Ri, Ree",
        padham_1:"Pe",
        padham_2:"Po",
        padham_3:"Raa",
        padham_4:"Ri"
    },
    
    swati:{
        padham_0:"Ru, Re, Ro, Roo, Ta, Taa",
        padham_1:"Ru",
        padham_2:"Re",
        padham_3:"Ro",
        padham_4:"Ta"
    },
    
    visakha:{
        padham_0:"Ti, Tee, Too, Te, Tu, Tae, To",
        padham_1:"Ti",
        padham_2:"Tu",
        padham_3:"Te",
        padham_4:"To"
    },
    
    
    anuradha:{
        padham_0:"Na, Naa, Ni, Nu, Ne, Nee, Noo, Nae",
        padham_1:"Na",
        padham_2:"Ni",
        padham_3:"Nu",
        padham_4:"Ne"
    },
    
    jyestha:{
        padham_0:"No, Ya, Yaa, Yi, Yu, Yee",
        padham_1:"No",
        padham_2:"Ya",
        padham_3:"Yi",
        padham_4:"Yu"
    },
    
    
    moola:{
        padham_0:"Ye, Yu, Ba, Bi, Yo, Bhi, Bha, Bhaa, Bhee",
        padham_1:"Ye, Yu, Ba, Bi, Yo, Bhi, Bha, Bhaa, Bhee",
        padham_2:"Yo",
        padham_3:"Bha",
        padham_4:"Bhi"
    },
    
    
      purvaashadha:{
        padham_0:"Bu, Da, Bhoo, Pha, Dha, Fa",
        padham_1:"Bhu",
        padham_2:"Da",
        padham_3:"pha",
        padham_4:"Da"
    },
    
    uttaraashadha:{
        padham_0:"Be, Bo, Ja, Ji, Bha, Bhe, Bho, Jaa, Jee",
        padham_1:"Bhe",
        padham_2:"Bho",
        padham_3:"Ja",
        padham_4:"Ji"
    },
    
    sravana:{
        padham_0:"Ju, Je, Jo, Khi , So, Khu, Khe, Kho",
        padham_1:"Ju/Khi",
        padham_2:"Je/Khu",
        padham_3:"Jo/Khe",
        padham_4:"Gha/Kho"
    },
    
    
    dhanishta:{
        padham_0:"Ga, Gi, Gu, Ge, Gee",
        padham_1:"Ga",
        padham_2:"Gi",
        padham_3:"Gu",
        padham_4:"Ge"
    },
    
    
    satabhisha:{
        padham_0:"Go, Sa, Saa, Si, Su, Soo, See, Gau",
        padham_1:"Go",
        padham_2:"Sa",
        padham_3:"Si",
        padham_4:"Su"
    },
    
    purvabhadra:{
        padham_0:"Se, So, Dha, Dhi, Di, Da, Daa, Dee",
        padham_1:"Se",
        padham_2:"So",
        padham_3:"Da",
        padham_4:"Di"
    },
    
    
     uttarabhadra:{
        padham_0:"Du, Tha, Jha, Na, Gna, Jna, Da, Gy",
        padham_1:"Du",
        padham_2:"Tha",
        padham_3:"Jha",
        padham_4:"Da, Tra"
    },
    
    Revathi:{
        padham_0:"De, Do, Cha, Chaa, Chi, Chee",
        padham_1:"Do",
        padham_2:"De",
        padham_3:"Cha",
        padham_4:"Chi"
    }
};







// // JavaScript Document
// Returns integer portion of x
function trunc(x)
{
    if (x < 0)
        return Math.ceil(x);
    else
        return Math.floor(x);
}

// Returns fractional portion of x
function frac(x)
{
    return Math.abs(x - trunc(x));
}

// Converts x (degrees) into radians
function radians(x)
{
    return (Math.PI / 180 * x);
}

// Converts x (radians) into degrees
function degrees(x)
{
    return (180 / Math.PI * x);
}

// Normalizes x (degrees) between 0 and 360
function norm(x)
{
    x = x % 360;
    if (x < 0)
        x += 360;
    return x;
}

// Provides an unambiguous version of atan(y/x)
function invtan(y, x)
{
    ap = degrees(Math.atan(y / x));
    if (y > 0)
    {
        if (x > 0)
        {
            for (j = -360; j <= 360; j += 180)
            {
                a = ap + j;
                if ((a >= 0) && (a < 90))
                    return a;
            }
        } else
        {
            for (j = -360; j <= 360; j += 180)
            {
                a = ap + j;
                if ((a >= 90) && (a < 180))
                    return a;
            }
        }
    } else
    {
        if (x < 0)
        {
            for (j = -360; j <= 360; j += 180)
            {
                a = ap + j;
                if ((a >= 180) && (a < 270))
                    return a;
            }
        } else
        {
            for (j = -360; j <= 360; j += 180)
            {
                a = ap + j;
                if ((a >= 270) && (a < 360))
                    return a;
            }
        }
    }
    return ap;
}


// Returns entered time in Universal Time format
function getUT(HOUR, MIN, SEC, MERIDIEM, TIMEZONE)
{
    hr = parseFloat(HOUR) + 12 * parseFloat(MERIDIEM);
    if (hr % 12 == 0)
        hr -= 12;
    min = parseFloat(MIN);
    sec = parseFloat(SEC);

    if (isNaN(min)) {
        min = 0;
    }
    if (isNaN(sec)) {
        sec = 0;
    }

    hr = hr + min / 60 + sec / 3600;
    //if (parseFloat(TIMEZONE_SIGN) == 0)
    if (parseFloat(TIMEZONE) >= 0)
        hr = hr - parseFloat(TIMEZONE);
    else
        hr = hr + parseFloat(TIMEZONE);
    return hr;
}

// Returns entered date in Julian Day format
// Argument is for fraction of day

function getJD(date, universal_time)
{

    var date_arr = date.split("-");
    date = date_arr[0];
    month = date_arr[1];
    year = date_arr[2];

    year = parseFloat(year);
    month = parseFloat(month);
    date = parseFloat(date);
    date = date + universal_time / 24;
    correction = false;


    if ((year > 1582) ||
            ((year == 1582) && (month > 10)) ||
            ((year == 1582) && (month == 10) && (day >= 15)))
    {
        correction = true;
    }
    if (month <= 2)
    {
        year--;
        month += 12;
    }
    if (correction)
    {
        A = trunc(year / 100);
        B = 2 - A + trunc(A / 4);
    } else
        B = 0;
    if (year < 0)
        C = trunc((365.25 * year) - 0.75);
    else
        C = trunc(365.25 * year);
    D = trunc(30.6001 * (month + 1));
    return B + C + D + date + 1720994.5;
}

// Performs calculation for Moon's position
function findMoon()
{
    //if (validate())
    // {
    //
    // NOTE: Epoch used is 1990 January 0.0
    //

    // Time calculations
    date = $('#dob').val();
    HOUR = $('#dob_hr').val();
    MIN = $('#dob_min').val();
    SEC = $('#dob_sec').val();
    MERIDIEM = $('#dob_meridiem').val();
    /*TIMEZONE_SIGN = $('#timezone_sign').val();
     TIMEZONE = $('#timezone_val').val();*/
    TIMEZONE = $('#time').val();

    UT = getUT(HOUR, MIN, SEC, MERIDIEM, TIMEZONE);
    // UT = getUT();                                         // Universal Time
    //document.first.UT.value = UT;
    $('#utc').val(UT);

    JD = getJD(date, UT)
    //JD = getJD(UT);                                       // Julian Day
    //document.first.JD.value = JD;
    $('#jd').val(JD);
    D = JD - 2447891.5;                                   // Days since epoch
    //document.first.D.value = D;
    $('#epoch_d').val(D);
    T = (JD - 2415020) / 36525;                             // Julian Century

    // Sun calculations
    eg = 279.403303;                                      // Mean ecliptic longitude of Sun at epoch
    wg = 282.768422;                                      // Ecliptic longitude of Sun at perigee at epoch
    e = 0.016713;                                         // Eccentricity of Earth's orbit at epoch
    N = norm(360 / 365.242191 * D);
    Ms = norm(N + eg - wg);                               // Mean anomaly of Sun
    // document.first.MS.value = Ms;
    $('#mean_anomaly').val(Ms);
    Ec = 360 / Math.PI * e * Math.sin(radians(Ms));
    ls = norm(N + Ec + eg);                               // Longitude of Sun
    // document.first.LS.value = ls;
    $('#lang_sun').val(ls);

    // Moon calculations
    l0 = 318.351648;                                      // Mean longitude of Moon at epoch
    P0 = 36.340410;                                       // Mean longitude of perigee at epoch
    N0 = 318.510107;                                      // Mean longitude of node at epoch
    i = 5.145396;                                         // Inclination of Moon's orbit
    l = norm(13.1763966 * D + l0);                          // Mean longitude of Moon
    //document.first.L.value = l;
    $('#moon_lang').val(l);
    Mm = norm(l - 0.1114141 * D - P0);                      // Mean anomaly of Moon
    //document.first.MM.value = Mm;
    $('#moon_anomaly').val(l);
    N = norm(N0 - 0.0529539 * D);                           // Mean longitude of ascending node
    C = l - ls;
    Ev = 1.2739 * Math.sin(radians(2 * C - Mm));              // Correction for evection
    Ae = 0.1858 * Math.sin(radians(Ms));                  // Correction for annual equation
    A3 = 0.37 * Math.sin(radians(Ms));                    // Third correction
    Mmp = norm(Mm + Ev - Ae - A3);                        // Corrected anomaly of Moon
    //document.first.MMP.value = Mmp;
    $('#moon_anomaly_crt').val(l);
    Ec = 6.2886 * Math.sin(radians(Mmp));                 // Correction for equation of the centre
    A4 = 0.214 * Math.sin(radians(2 * Mmp));                // Fourth correction
    lp = norm(l + Ev + Ec - Ae + A4);                     // Corrected longitude of Moon
    // document.first.LP.value = lp;
    //$('#').val(l);
    V = 0.6583 * Math.sin(radians(2 * (lp - ls)));            // Variation
    lpp = norm(lp + V);                                   // True orbital longitude of Moon
    //document.first.LPP.value = lpp;
    $('#moon_lang_crt').val(l);
    Np = norm(N - 0.16 * Math.sin(radians(Ms)));            // Corrected longitude of node
    lm = invtan(Math.sin(radians(lpp - Np)) * Math.cos(radians(i)), Math.cos(radians(lpp - Np))) + Np;
    // Ecliptic longitude of Moon
    // document.first.LM.value = lm;
    $('#ecliptic_lang_moon').val(l);
    bm = norm(degrees(Math.asin(Math.sin(radians(lpp - Np)) * Math.sin(radians(i)))));
    // Ecliptic latitude of Moon
    //document.first.BM.value = bm;
    $('#ecliptic_lat_moon').val(l);
    e = (23 + 26 / 60 + 21.45 / 3600) - (46.815 / 3600) * T - (0.0006 / 3600) * T * T + (0.00181 / 3600) * T * T * T;
    // Obliquity of the ecliptic
    ra = invtan(Math.sin(radians(lm)) * Math.cos(radians(e)) - Math.tan(radians(bm)) * Math.sin(radians(e)), Math.cos(radians(lm)));
    // R.A. of Moon
    ra /= 15;                                             // Convert from degrees to hours
    rah = trunc(ra);
    ram = trunc(frac(ra) * 60);
    ras = trunc(frac(frac(ra) * 60) * 60);
    //document.first.RAH.value = rah;
    //document.first.RAM.value = ram;
    //document.first.RAS.value = ras;
    $('#rah').val(rah);
    $('#ram').val(ram);
    $('#ras').val(ras);
    dec = norm(degrees(Math.asin(Math.sin(radians(bm)) * Math.cos(radians(e)) + Math.cos(radians(bm)) * Math.sin(radians(e)) * Math.sin(radians(lm)))));
    // Dec. of Moon
    if (dec > 90)
        dec -= 360;
    decd = trunc(dec);
    decm = trunc(frac(dec) * 60);
    decs = trunc(frac(frac(dec) * 60) * 60);
    $('#decd').val(decd);
    $('#decm').val(decm);
    $('#decs').val(decs);

    nak(ra, dec, e);
    //}
}

// Perform Nakshatram calculation based on Moon's position
function nak(ra, dec, e)
{
    AngleBetEqAndEcliptic = e;
    FPAShift = 22.3488;
    StarsMalayalam = ["Ashwini (Aswathi)", "Bharani", "Krithika (Karthikai)", "Rohini", "Mrigasira (Magayiriyam)",
        "Thiruvathira (Athira)", "Punarvasu (Punartham)", "Pushya (Pooyam)", "Aslesha (Ayilyam)", "Magha (Makam)",
        "Purva Phalguni (Pooram)", "Uttara Phalguni (Uthram)", "Hasta (Atham)", "Chitra (Chithira)", "Swati (Chothy)",
        "Visakha (Visakam)", "Anuradha (Anizham)", "Jyestha (Triketta)", "Moola (Moolam)", "PurvaAshadha (Pooradam)",
        "UttaraAshadha (Uthradam)", "Sravana (Thiruvonam)", "Dhanishta (Avittam)", "Satabhisha (Chathayam)",
        "PurvaBhadra (Pururuttathy)", "UttaraBhadra (Uthrattathy)", "Revathi"];

    StarsEnglish = ["Sheratan (Beta Arietis)",
        "41 Arietis",
        "Pleiades (Nu Tauri)",
        "Aldebaran (Alpha Tauri)",
        "Heka",
        "Betelgeuse (Alpha Orionis)",
        "Pollux (Beta Geminorum)",
        "Asellus Australis (Delta Cancri)",
        "Acubens (Alpha Cancri)",
        "Regulus (Alpha Leonis)",
        "Zosma (Delta Leonis)",
        "Denebola (Beta Leonis)",
        "Algorab (Delta Corvi)",
        "Spica (Alpha Virginis)",
        "Arcturus (Alpha Bootis)",
        "Iota Librae",
        "Delta Scorpii",
        "Antares (Alpha Scorpii)",
        "Shaula (Lambda Scorpii)",
        "Kaus Media (Delta Sagittarii)",
        "Nunki (Sigma Sagittarii)",
        "Altair (Alpha Aquilae)",
        "Alpha Delphini",
        "Lambda Aquarii",
        "Markab (Alpha Pegasi)",
        "Alpheratz (Alpha Andromedae)",
        "Zeta Piscium"];

    RA = radians(ra * 360 / 24);

    D = radians(dec);

    E = radians(AngleBetEqAndEcliptic);
    A = radians(360 / 27);
    R = Math.sin(D) * Math.sin(E) + Math.cos(D) * Math.cos(E) * Math.sin(RA);
    R = R / (Math.cos(D) * Math.cos(RA));

    if (Math.cos(RA) * Math.cos(D) < 0)
        S = Math.PI;
    else
        S = 0;

    if (Math.abs(Math.cos(D) * Math.cos(RA)) > 0.00000001)
        L = Math.atan(R) + S;
    else
        L = Math.PI / 2 + S;

    L = L - radians(FPAShift) + 10 * Math.PI;
    N = 270 + Math.floor(L / A);
    N = N % 27;

    ///document.first.NAL.value = StarsMalayalam[N];
    //document.first.NALE.value = StarsEnglish[N];
//console.log(StarsMalayalam[N]);
    $('#nak').val(StarsMalayalam[N]);
    $('#nak_en').val(StarsMalayalam[N]);

    dob_meridiem = $('#dob_meridiem').val();
    var t = parseInt(dob_meridiem);
    rasi1(StarsMalayalam[N], t);

}





function rasi1(n, t)
{

    var rasi_general = '';
    var rasi_en = '';

    rasi = ["Mesham", "Rishabam", "Midhunam", "Kadagam", "Simmam", "Kanni", "Thulaam", "Viruchigam", "Dhanusu", "Magaram", "Kumbam", "Meenam"];
    english = ["Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Saggitarius", "Capricorn", "Aquarius", "Pisces"];
    if (n == StarsMalayalam[0] || n == StarsMalayalam[1] || (n == StarsMalayalam[2] && t == 0))
    {
        rasi_general = rasi[0];
        rasi_en = english[0];
    } else if (n == StarsMalayalam[2] || n == StarsMalayalam[3] || (n == StarsMalayalam[4] && t == 0))
    {
        rasi_general = rasi[1];
        rasi_en = english[1];
    } else if (n == StarsMalayalam[4] || n == StarsMalayalam[5] || (n == StarsMalayalam[6] && t == 0))
    {
        rasi_general = rasi[2];
        rasi_en = english[2];
    } else if (n == StarsMalayalam[6] || n == StarsMalayalam[7] || n == StarsMalayalam[8])
    {
        rasi_general = rasi[3];
        rasi_en = english[3];
    } else if (n == StarsMalayalam[9] || n == StarsMalayalam[10] || (n == StarsMalayalam[11] && t == 0))
    {
        rasi_general = rasi[4];
        rasi_en = english[4];
    } else if (n == StarsMalayalam[11] || n == StarsMalayalam[12] || (n == StarsMalayalam[13] && t == 0))
    {
        rasi_general = rasi[5];
        rasi_en = english[5];
    } else if (n == StarsMalayalam[13] || n == StarsMalayalam[14] || n == StarsMalayalam[15])
    {
        rasi_general = rasi[6];
        rasi_en = english[6];
    } else if (n == StarsMalayalam[15] || n == StarsMalayalam[16] || n == StarsMalayalam[17])
    {
        rasi_general = rasi[7];
        rasi_en = english[7];
    } else if (n == StarsMalayalam[18] || n == StarsMalayalam[19] || (n == StarsMalayalam[20] && t == 0))
    {
        rasi_general = rasi[8];
        rasi_en = english[8];
    } else if (n == StarsMalayalam[21] || n == StarsMalayalam[22] || (n == StarsMalayalam[23] && t == 0))
    {
        rasi_general = rasi[9];
        rasi_en = english[9];
    } else if (n == StarsMalayalam[23] || n == StarsMalayalam[24] || n == StarsMalayalam[25])
    {
        rasi_general = rasi[10];
        rasi_en = english[10];
    } else if (n == StarsMalayalam[25] || n == StarsMalayalam[26] || n == StarsMalayalam[27])
    {
        rasi_general = rasi[11];
        rasi_en = english[11];
    }



      n = n.toLowerCase();
      
      var rasi_splited = n.split(' ');
      
      console.log("find words for :" + rasi_splited[0]);
     
      var first_selected = rasi_splited[0];
      var letters_selected = Starting_letters[first_selected];
      
      if(typeof letters_selected === "undefined")
        technoNotify('', 'No Result. try another', 'error');
      
      console.log(rasi_general)
      console.log(rasi_en)
      
    $('#letters').val(letters_selected.padham_0);
    $('#rasi').val(rasi_general);
    $('#rasi_en').val(rasi_en);
    
  
    
}




$(document).ready(function (){
    $('#timezone').val($('#time').find("option:selected").text());
    $('#time').change(function (){
       $('#timezone').val($(this).find("option:selected").text());
   });
    
    
});


  /*
 function PrintContent() {
 var DocumentContainer = document.getElementById('STR');
 var WindowObject = window.open('', 'PrintWindow', 'width=750,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes');
 WindowObject.document.writeln(DocumentContainer.innerHTML);
 WindowObject.document.close();
 WindowObject.focus();
 WindowObject.print();
 WindowObject.close();
 }
 
 */



        
        
    /*   
        ["Ashwini (Aswathi)", "Bharani", "Krithika (Karthikai)", "Rohini", "Mrigasira (Magayiriyam)",
        "Thiruvathira (Athira)", "Punarvasu (Punartham)", "Pushya (Pooyam)", "Aslesha (Ayilyam)", "Magha (Makam)",
        "Purva Phalguni (Pooram)", "Uttara Phalguni (Uthram)", "Hasta (Atham)", "Chitra (Chithira)", "Swati (Chothy)",
        "Visakha (Visakam)", "Anuradha (Anizham)", "Jyestha (Triketta)", "Moola (Moolam)", "PurvaAshadha (Pooradam)",
        "UttaraAshadha (Uthradam)", "Sravana (Thiruvonam)", "Dhanishta (Avittam)", "Satabhisha (Chathayam)",
        "PurvaBhadra (Pururuttathy)", "UttaraBhadra (Uthrattathy)", "Revathi"];*/